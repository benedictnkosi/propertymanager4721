<html>
<head>


<style>
#customers {
	font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
	border-collapse: collapse;
	width: 100%;
}

#customers td, #customers th {
	border: 1px solid #ddd;
	padding: 8px;
}

#customers tr:nth-child(even) {
	background-color: #f2f2f2;
}

#customers tr:hover {
	background-color: #ddd;
}

#customers th {
	padding-top: 12px;
	padding-bottom: 12px;
	text-align: left;
	background-color: #4CAF50;
	color: white;
}
</style>
<script src="js/jquery.validate.js" type="text/javascript"></script>


</head>

<body>
	<input type="button" id="btnDownload" value="download" /> Download PDF
	<div class="white-back row" style="padding: 1.5rem;" id="tvgMainCnt">
		<div id="top-content">
			<div>
				<div>
					<img src="/images/logo.jpg" style="height: 100px;" />
				</div>
			</div>
			<div style="margin-top: 1rem;">
				<h1>Renuga Guesthouse Quotation</h1>
				Quotation Number:<
				<resa_id>><br>
				Quotation date:<<ivoice_date>>
				<h3>
					<strong>Bill to:</strong>
				</h3>

				<p>
					<
					<customer_name>><br>
					<<customer_email>><br>
					<<customer_phone>>
				</p>

				<p>
					Arrival date: <
					<resa_check_in>><br>
					Departure date: <<resa_check_out>>
				</p>
			</div>
			<div>Added some fake text: Please ignore this is test text,
				Please ignore this is test text, Please ignore this is test text.</div>
			<br />
			<table id="customers" class="table table-striped" width="100%">

				<thead width="100%" width="100%">
					<tr class='warning'>

						<th>Room</th>
						<th>Description</th>
						<th>Price</th>
						<th>Nights</th>
						<th>Total</th>

					</tr>
				</thead>
				<tbody width="100%">
					<tr>

						<td><<resa_accommodation>></td>
						<td>Check In: <<resa_check_in>><br>
							Check out: <<resa_check_out>></td>
						<td><<resa_price>></td>
						<td><<resa_nights>></td>
						<td><<resa_total>></td>

					</tr>

				</tbody>
			</table>
			<div style="margin-top: 1rem;">
				<p>
					Thank you for choosing to stay with us!<br> <br> See you
					soon!<br> <br> <br> <strong>Notes</strong><br>
					<br> 
					
					<br>Please bring your South African ID or
drivers license for check-in. we can't check you in without this. Please find us on booking.com or
airbnb.com for passport holders.<br><br>Please make a payment for the deposit to secure your
					room. Your room is still bookable on our websites.<br> <br>
					50% Deposit is required to secure the booking.<br> <br>
					We take Card payment (3%), Cash and EFT. We, unfortunately, can not
					check you in with an outstanding balance.<br> <br> Please
					email proof of payment to info@renuga.co.za<br> <br> <strong>Banking
						Details</strong><br> FNB<br> Name: Renuga Guesthouse<br>
					Acc: 62788863241<br> branch: 250 655<br> <br> Thank
					you for choosing to stay with us.<br> <br> <strong>House
						Rules</strong>
				</p>

				<p>&nbsp;</p>

				<ul>
					<li>No noise after 6 pm</li>
					<li>No loud music</li>
					<li>No parties</li>
					<li>No smoking inside the house</li>
					<li>Check-in cut-off is at 22:00. Please make arrangements for
						a later check-in</li>
					<li>Check-out is at 10:00 AM</li>
					<li>Kids under the age of 12 are not allowed at the guesthouse</li>




				</ul>
				<span
					style="font-family: comic sans ms, marker felt-thin, arial, sans-serif">We
					look forward to hosting you<br> Renuga Guest House
				</span>
				</p>
			</div>
		</div>

		<div id="testchart"></div>
	</div>

	</div>
</body>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<!-- Required to convert named colors to RGB -->
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/canvg/1.4/rgbcolor.min.js"></script>

<!-- Optional if you want blur -->
<script
	src="https://cdn.jsdelivr.net/npm/stackblur-canvas@^1/dist/stackblur.min.js"></script>

<script
	src="https://cdn.jsdelivr.net/npm/canvg/dist/browser/canvg.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/highcharts/5.0.7/highcharts.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.2.61/jspdf.debug.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    Highcharts.chart('testchart', {

        
    });
});
$("#btnDownload").click(function(){
  var doc = new jsPDF('portrait', 'pt', 'a4', true);
    var elementHandler = {
        '#ignorePDF': function(element, renderer) {
            return true;
        }
    };

    var source = document.getElementById("top-content");
    doc.fromHTML(source, 15, 15, {
        'width': 560,
        'elementHandlers': elementHandler
    });

    var svg = document.querySelector('svg');
    var canvas = document.createElement('canvas');
    var canvasIE = document.createElement('canvas');
    var context = canvas.getContext('2d');




    var data = (new XMLSerializer()).serializeToString(svg);
    canvg(canvas, data);
    var svgBlob = new Blob([data], {
        type: 'image/svg+xml;charset=utf-8'
    });

    var url = canvas.toDataURL(svgBlob);//DOMURL.createObjectURL(svgBlob);

    var img = new Image();
    img.onload = function() {
        context.canvas.width = $('#testchart').find('svg').width();;
        context.canvas.height = $('#testchart').find('svg').height();;
        context.drawImage(img, 0, 0);
        // freeing up the memory as image is drawn to canvas
        //DOMURL.revokeObjectURL(url);

        var dataUrl;
        if (isIEBrowser()) { // Check of IE browser 
            var svg = $('#testchart').highcharts().container.innerHTML;
            canvg(canvasIE, svg);
            dataUrl = canvasIE.toDataURL('image/JPEG');
        } else {
            dataUrl = canvas.toDataURL('image/jpeg');
        }
        doc.addImage(dataUrl, 'JPEG', 20, 365, 560, 350); // 365 is top 

        var bottomContent = document.getElementById("bottom-content");
        doc.fromHTML(bottomContent, 15, 750, {   //700 is bottom content top  if you increate this then you should increase above 365
            'width': 560,
            'elementHandlers': elementHandler
        });

        setTimeout(function() {
            doc.save('HTML-To-PDF-Dvlpby-Bhavdip.pdf');
        }, 2000);
    };
    img.src = url;
});
function isIEBrowser() {
    var ieBrowser;
    var ua = window.navigator.userAgent;
    var msie = ua.indexOf("MSIE ");

    if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./)) // Internet Explorer
    {
        ieBrowser = true;
    } else //Other browser
    {
        console.log('Other Browser');
        ieBrowser = false;
    }

    return ieBrowser;
};
</script>
</html>